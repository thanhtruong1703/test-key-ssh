<html>
    <head>
        <link rel="stylesheet" href="position.css">
    </head>



    <body>
        
        <div id="k_sl">
            <div id="k1_sl"> NHẬP SÓ LƯỢNG CÂU HỎI CẦN TẠO </div>
            <input type="number" id="sl" placeholder=" Số lượng ">
        </div>


        <button onclick="nop()"> Tạo câu hỏi </button>

        <div id="container33"></div>
        <button id="bt-xoa" onclick="xoa()"> clear data</button>

<!-- tao nut nop bai -->
       <button id="thuchien" onclick="luu()"> thực hiện </button>
      <button id="nop_bai" onclick="complete()"> nop bai</button>
      
        <div id="diem_so">
            <div> Score users : </div>
            <div id="diem"> </div>
        </div>

 
        <script>


let data =[];
let data1=[];
let data2=[];
let n;
let diem=0;
//  lấy số lượng câu hỏi muốn tạo
        function nop(){
                  n=document.getElementById("sl").value;
               //   console.log(n);

                  function taodiv(numberOfDivs) { 
                   const container = document.getElementById('container33'); 
                   for (let i = 0; i < numberOfDivs; i++) {
                        const div = document.createElement('div'); 
                        div.textContent = "Câu " + (i+1);
                        const br = document.createElement('br');
                        const input = document.createElement('input'); 
                        // -> 
                        input.type = 'text';
                        input.placeholder = 'nhập câu hỏi'; 
                        input.name='kq';
                        //
                        const input1= document.createElement('input');
                        // ->
                        input1.type = 'text';
                        input1.placeholder = ' nhập câu trả lời'; 
                        input1.name='kq1';

                        div.appendChild(br);
                        div.appendChild(input);
                        div.appendChild(input1);
                        container.appendChild(div);                   } 
            } 
            document.getElementById("nop_bai").style.display = "none";
///         
///
            taodiv(n);
// tuong tac voi nut thuc hien
            var button = document.getElementById("thuchien");
             if (button.style.display === "none") { 
                button.style.display = "block";
                }       
        }// xong        

        

// lay du lieu tu html vao mang thuoc javascript de xu li du lieu
        function luu() {
        const container = document.getElementById('container33');
          for (let i = 0; i < container.children.length; i++) { 
               const input = container.children[i].querySelector('input'); 
               if (input) { 
                  data.push(input.value); 
               } 
             
          }
              // nhap input theo name;
               const input1= document.querySelectorAll('input[name="kq1"]');
               input1.forEach(input => {
                      data1.push(input.value);
               });
        console.log(data);
        console.log(data1);

   ///////        // chuyen khung hinh

     const container1 = document.getElementById('container33');
     while (container1.firstChild) { 
          container1.removeChild(container1.firstChild);
     } 
   
     document.getElementById("thuchien").style.display = "none";  
     document.getElementById("nop_bai").style.display = "block"; 
     
     sinh(n);
    }
// luu thanh cong

///****/// 

function sinh(numberOfDivs) { 
                   const container = document.getElementById('container33'); 
                   for (let i = 0; i < numberOfDivs; i++) {
                        const div = document.createElement('div'); 
                        div.textContent = "Câu " + (i+1) + " : " + data[i];
                        const br = document.createElement('br');
                        const input = document.createElement('input'); 
                        // -> 
                        input.type = 'text';
                        input.placeholder = 'nhập đáp án'; 
                        input.name='ans';
                        //
                   //     const input1= document.createElement('input');
                        // ->
                    //    input1.type = 'text';
                      //  input1.placeholder = ' nhập câu trả lời'; 
                      //  input1.name='kq1';

                        div.appendChild(br);
                        div.appendChild(input);
                     //   div.appendChild(input1);
                        container.appendChild(div);                   } 
            } 



         document.getElementById("nop_bai").style.display = "none";

         function complete(){
                  document.getElementById("thuchien").style.display = "none";

                  const input2= document.querySelectorAll('input[name="ans"]');
                        input2.forEach(input => {
                        data2.push(input.value);
               });
     // so sanh
         
          for (let i=0;i<data2.length;i++) {
               if (data2[i]=='' || data1[i]=='') {
                   diem = diem + 0;
               }
               else {
                    if (data2[i]==data1[i]) {
                       diem=diem+0.5;
                    }
               }
             
          }       
            document.getElementById("diem").innerHTML = diem;

        //    const container2 = document.getElementById('container');
          //     while (container2.firstChild) { 
           //      container2.removeChild(container2.firstChild);
            //   } 
            data =[];
            data1=[];
            data2=[];
            diem=0;
         }


///***////


// an nut thuc hien         
        document.getElementById("thuchien").style.display = "none";     
//       


// thuc hien xoa du lieu

function xoa() { 
    const container = document.getElementById('container33');
     while (container.firstChild) { 
          container.removeChild(container.firstChild);
     } 
     document.getElementById("thuchien").style.display = "none";   
     data=[];
     data1=[];
     data2=[];
     diem=0;
     document.getElementById("diem").innerHTML="";
     document.getElementById("sl").value="";
}

        </script>

    </body>
</html>